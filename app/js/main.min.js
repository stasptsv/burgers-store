window.addEventListener('DOMContentLoaded', function() {

	// Vertical Accordeon
	let triggers = document.querySelectorAll('.team-trigger');
	let accContent = document.querySelectorAll('.team-list__item-content');

	triggers.forEach(function(item) {
		item.addEventListener('click', () => {
			accContent.forEach(function(item) {
				item.classList.remove('show')
				item.previousElementSibling.classList.remove('active-item_team')
			});
			item.nextElementSibling.classList.toggle('show');
			item.classList.toggle('active-item__team');
		}); 
	});

	// Feedback Popup
	let popupFeedback = document.querySelector('.feedback-popup');
	let viewBtn = document.querySelectorAll('.feedback-view');
	let closeBtn = document.querySelectorAll('.feedback-full__close');

	// Open Popup
	viewBtn.forEach(function (item) {
		item.addEventListener('click', (event) => {
			event.preventDefault();
			popupFeedback.classList.add('popup-show');
		});
	});

	// Close Popup
	closeBtn.forEach(function(item) {
		item.addEventListener('click', () => {
			popupFeedback.classList.remove('popup-show');
		});
	});

	// Horizontal Accordeon
	let accordeonHorizontal = (function() {
		let accordeon = document.querySelector('.menu-list');
		let triggerWidth;
		let isClicked = false;
		let isPhone = window.innerWidth <= 480;
		
		if (isPhone) {
			accordeon.style.left = accordeon.getBoundingClientRect().left + 'px';
		}
	
		let widthContent = function() {
			let itemQuantity = 3;
			
			if (isPhone) {itemQuantity = 1;}
			let computedWidth = window.innerWidth - itemQuantity * triggerWidth;
	
			return computedWidth > 540 ? 540 : computedWidth;
		}
	
		let toggleAccordeon = function(elem) {
			let initialLeft = window.innerWidth - 3 * triggerWidth + 'px';
			
			if (isClicked) {
				let isOpenedItemClicked = elem.classList.contains('active-acc');
				let activeItem = accordeon.querySelector('.active-acc');
				
				activeItem.classList.toggle('active-acc');
				activeItem.querySelector('.menu-item__content').style.width = 0;
				isClicked = false;
				
				if (isOpenedItemClicked) {
					if (isPhone) {
						accordeon.style.left = initialLeft;}
					return;
				}
			}
			elem.classList.toggle('active-acc');
			
			let elemContent = elem.querySelector('.menu-item__content');
			elemContent.style.width = widthContent() + 'px';
			
			if (isPhone) {
				accordeon.style.left = [].indexOf.call(accordeon.children, elem) * (-(triggerWidth)) + 'px';
			}
			isClicked = true;
		}
	
		let addListeners = function() {
			accordeon.addEventListener('click', function(event) {
				let target = event.target.closest('.menu-trigger');
			
				isPhone = window.innerWidth <= 480;
				triggerWidth = parseInt(getComputedStyle(accordeon.querySelector('.menu-trigger')).width);
				if (target) {
					toggleAccordeon(target.parentElement);}
			})
	
			let crosses = accordeon.querySelectorAll('.menu-item__close');
			for (let i = 0; i < crosses.length; i++) {
				crosses[i].addEventListener('click', function() {
				toggleAccordeon(crosses[i].closest('.active-acc'));
			});
			}
		}
		return {init: addListeners};
	})();
	
	accordeonHorizontal.init();
	

	// Form 
	let message = {
			loading: 'Загрузка...',
			success: 'Спасибо! Скоро мы с вами свяжемся!',
			failure: 'Что-то пошло не так...'
	}

	let form = document.querySelector('.order-form'),
			input = document.querySelector('input'),
			modal =	document.querySelector('.modal'),
			statusMessage = modal.querySelector('.modal-title'),
			modalBtnClose = modal.querySelector('.button-modal');

	modalBtnClose.addEventListener('click', (event) => {
		event.preventDefault();
		modal.classList.remove('modal-show');
	})

	form.addEventListener('submit', function(event) {
		event.preventDefault();

		let request = new XMLHttpRequest();

		request.open('POST', 'server.php');
		request.setRequestHeader('Content-type', 'application/json; charset=utf-8');

		let formData = new FormData(form);

		let obj = {};
		formData.forEach(function(value, key) {
				obj[key] = value;
		});
		
		let json = JSON.stringify(obj);

		request.send(json);

		request.addEventListener('readystatechange', function() {
			if (request.readyState < 4) {
				modal.classList.add('modal-show');
				statusMessage.innerHTML = message.loading;
			} else if(request.readyState === 4 && request.status == 200) {
				modal.classList.add('modal-show');	
				statusMessage.innerHTML = message.success;
			} else {
					statusMessage.classList.add('modal-show');
					statusMessage.innerHTML = message.failure;
				}
			});

		for (let i = 0; i < input.length; i++) {
			input[i].value = '';
		}
	});

	// Slider
	let slideIndex = 1;
	let slideIndexTitle = 1;
	let slideIndexDescr = 1;
	let slidesImage = document.querySelectorAll('.slider-item');
	let slidesTitle = document.querySelectorAll('.section-title__burgers');
	let slidesDescr = document.querySelectorAll('.burger-descr');
	let arrowPrev = document.querySelector('.arrow-prev');
	let arrowNext = document.querySelector('.arrow-next');
	let price = document.querySelectorAll('.burger-price');

	showSlidesImage(slideIndex);
	// showSlidesTitle(slideIndexTitle);
	// showSlidesDescr(slideIndexDescr);
	
	function showSlidesImage(n) {
		if (n > slidesImage.length) {
			slideIndex = 1;
		} if (n < 1) {
			slideIndex = slidesImage.length;
		}

		slidesImage.forEach((item) => { // Перебор всех слайдов
			item.style.display = 'none'; // Скрыть все слайды
		});

		slidesTitle.forEach((item) => {
			item.style.display = 'none';
		});

		price.forEach((item) => {
			item.style.display = 'none'
		})

		slidesDescr.forEach((item) => {
			item.style.display = 'none';
		});

		slidesImage[slideIndex - 1].style.display = 'block'; // Показать первый слайд
		slidesTitle[slideIndex - 1].style.display = 'block';
		slidesDescr[slideIndex - 1].style.display = 'block'; 
		price[slideIndex - 1].style.display = 'block';
	}

	function nextSlides(n) { // Смена слайдов
		showSlidesImage(slideIndex += n);
	}

	function currentSlide(n) {
		showSlidesImage(slideIndex = n);
	}

	arrowPrev.addEventListener('click', function() {
		nextSlides(-1);
	});

	arrowNext.addEventListener('click', function() {
		nextSlides(1);
	})
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuXHQvLyBWZXJ0aWNhbCBBY2NvcmRlb25cclxuXHRsZXQgdHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVhbS10cmlnZ2VyJyk7XHJcblx0bGV0IGFjY0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVhbS1saXN0X19pdGVtLWNvbnRlbnQnKTtcclxuXHJcblx0dHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcblx0XHRpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRhY2NDb250ZW50LmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG5cdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXHJcblx0XHRcdFx0aXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS1pdGVtX3RlYW0nKVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0aXRlbS5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZS1pdGVtX190ZWFtJyk7XHJcblx0XHR9KTsgXHJcblx0fSk7XHJcblxyXG5cdC8vIEZlZWRiYWNrIFBvcHVwXHJcblx0bGV0IHBvcHVwRmVlZGJhY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlZGJhY2stcG9wdXAnKTtcclxuXHRsZXQgdmlld0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mZWVkYmFjay12aWV3Jyk7XHJcblx0bGV0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlZWRiYWNrLWZ1bGxfX2Nsb3NlJyk7XHJcblxyXG5cdC8vIE9wZW4gUG9wdXBcclxuXHR2aWV3QnRuLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0cG9wdXBGZWVkYmFjay5jbGFzc0xpc3QuYWRkKCdwb3B1cC1zaG93Jyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0Ly8gQ2xvc2UgUG9wdXBcclxuXHRjbG9zZUJ0bi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHBvcHVwRmVlZGJhY2suY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtc2hvdycpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdC8vIEhvcml6b250YWwgQWNjb3JkZW9uXHJcblx0bGV0IGFjY29yZGVvbkhvcml6b250YWwgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHRsZXQgYWNjb3JkZW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtbGlzdCcpO1xyXG5cdFx0bGV0IHRyaWdnZXJXaWR0aDtcclxuXHRcdGxldCBpc0NsaWNrZWQgPSBmYWxzZTtcclxuXHRcdGxldCBpc1Bob25lID0gd2luZG93LmlubmVyV2lkdGggPD0gNDgwO1xyXG5cdFx0XHJcblx0XHRpZiAoaXNQaG9uZSkge1xyXG5cdFx0XHRhY2NvcmRlb24uc3R5bGUubGVmdCA9IGFjY29yZGVvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgJ3B4JztcclxuXHRcdH1cclxuXHRcclxuXHRcdGxldCB3aWR0aENvbnRlbnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0bGV0IGl0ZW1RdWFudGl0eSA9IDM7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaXNQaG9uZSkge2l0ZW1RdWFudGl0eSA9IDE7fVxyXG5cdFx0XHRsZXQgY29tcHV0ZWRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gaXRlbVF1YW50aXR5ICogdHJpZ2dlcldpZHRoO1xyXG5cdFxyXG5cdFx0XHRyZXR1cm4gY29tcHV0ZWRXaWR0aCA+IDU0MCA/IDU0MCA6IGNvbXB1dGVkV2lkdGg7XHJcblx0XHR9XHJcblx0XHJcblx0XHRsZXQgdG9nZ2xlQWNjb3JkZW9uID0gZnVuY3Rpb24oZWxlbSkge1xyXG5cdFx0XHRsZXQgaW5pdGlhbExlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIDMgKiB0cmlnZ2VyV2lkdGggKyAncHgnO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGlzQ2xpY2tlZCkge1xyXG5cdFx0XHRcdGxldCBpc09wZW5lZEl0ZW1DbGlja2VkID0gZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1hY2MnKTtcclxuXHRcdFx0XHRsZXQgYWN0aXZlSXRlbSA9IGFjY29yZGVvbi5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlLWFjYycpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGFjdGl2ZUl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLWFjYycpO1xyXG5cdFx0XHRcdGFjdGl2ZUl0ZW0ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbV9fY29udGVudCcpLnN0eWxlLndpZHRoID0gMDtcclxuXHRcdFx0XHRpc0NsaWNrZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoaXNPcGVuZWRJdGVtQ2xpY2tlZCkge1xyXG5cdFx0XHRcdFx0aWYgKGlzUGhvbmUpIHtcclxuXHRcdFx0XHRcdFx0YWNjb3JkZW9uLnN0eWxlLmxlZnQgPSBpbml0aWFsTGVmdDt9XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlLWFjYycpO1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IGVsZW1Db250ZW50ID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtX19jb250ZW50Jyk7XHJcblx0XHRcdGVsZW1Db250ZW50LnN0eWxlLndpZHRoID0gd2lkdGhDb250ZW50KCkgKyAncHgnO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGlzUGhvbmUpIHtcclxuXHRcdFx0XHRhY2NvcmRlb24uc3R5bGUubGVmdCA9IFtdLmluZGV4T2YuY2FsbChhY2NvcmRlb24uY2hpbGRyZW4sIGVsZW0pICogKC0odHJpZ2dlcldpZHRoKSkgKyAncHgnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlzQ2xpY2tlZCA9IHRydWU7XHJcblx0XHR9XHJcblx0XHJcblx0XHRsZXQgYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGFjY29yZGVvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0bGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubWVudS10cmlnZ2VyJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRcdGlzUGhvbmUgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSA0ODA7XHJcblx0XHRcdFx0dHJpZ2dlcldpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShhY2NvcmRlb24ucXVlcnlTZWxlY3RvcignLm1lbnUtdHJpZ2dlcicpKS53aWR0aCk7XHJcblx0XHRcdFx0aWYgKHRhcmdldCkge1xyXG5cdFx0XHRcdFx0dG9nZ2xlQWNjb3JkZW9uKHRhcmdldC5wYXJlbnRFbGVtZW50KTt9XHJcblx0XHRcdH0pXHJcblx0XHJcblx0XHRcdGxldCBjcm9zc2VzID0gYWNjb3JkZW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW1fX2Nsb3NlJyk7XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY3Jvc3Nlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGNyb3NzZXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0b2dnbGVBY2NvcmRlb24oY3Jvc3Nlc1tpXS5jbG9zZXN0KCcuYWN0aXZlLWFjYycpKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiB7aW5pdDogYWRkTGlzdGVuZXJzfTtcclxuXHR9KSgpO1xyXG5cdFxyXG5cdGFjY29yZGVvbkhvcml6b250YWwuaW5pdCgpO1xyXG5cdFxyXG5cclxuXHQvLyBGb3JtIFxyXG5cdGxldCBtZXNzYWdlID0ge1xyXG5cdFx0XHRsb2FkaW5nOiAn0JfQsNCz0YDRg9C30LrQsC4uLicsXHJcblx0XHRcdHN1Y2Nlc3M6ICfQodC/0LDRgdC40LHQviEg0KHQutC+0YDQviDQvNGLINGBINCy0LDQvNC4INGB0LLRj9C20LXQvNGB0Y8hJyxcclxuXHRcdFx0ZmFpbHVyZTogJ9Cn0YLQvi3RgtC+INC/0L7RiNC70L4g0L3QtSDRgtCw0LouLi4nXHJcblx0fVxyXG5cclxuXHRsZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmRlci1mb3JtJyksXHJcblx0XHRcdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQnKSxcclxuXHRcdFx0bW9kYWwgPVx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyksXHJcblx0XHRcdHN0YXR1c01lc3NhZ2UgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtdGl0bGUnKSxcclxuXHRcdFx0bW9kYWxCdG5DbG9zZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tbW9kYWwnKTtcclxuXHJcblx0bW9kYWxCdG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLXNob3cnKTtcclxuXHR9KVxyXG5cclxuXHRmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGxldCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG5cdFx0cmVxdWVzdC5vcGVuKCdQT1NUJywgJ3NlcnZlci5waHAnKTtcclxuXHRcdHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnKTtcclxuXHJcblx0XHRsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcblxyXG5cdFx0bGV0IG9iaiA9IHt9O1xyXG5cdFx0Zm9ybURhdGEuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XHJcblx0XHRcdFx0b2JqW2tleV0gPSB2YWx1ZTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRsZXQganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaik7XHJcblxyXG5cdFx0cmVxdWVzdC5zZW5kKGpzb24pO1xyXG5cclxuXHRcdHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAocmVxdWVzdC5yZWFkeVN0YXRlIDwgNCkge1xyXG5cdFx0XHRcdG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLXNob3cnKTtcclxuXHRcdFx0XHRzdGF0dXNNZXNzYWdlLmlubmVySFRNTCA9IG1lc3NhZ2UubG9hZGluZztcclxuXHRcdFx0fSBlbHNlIGlmKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCAmJiByZXF1ZXN0LnN0YXR1cyA9PSAyMDApIHtcclxuXHRcdFx0XHRtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC1zaG93Jyk7XHRcclxuXHRcdFx0XHRzdGF0dXNNZXNzYWdlLmlubmVySFRNTCA9IG1lc3NhZ2Uuc3VjY2VzcztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHN0YXR1c01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnbW9kYWwtc2hvdycpO1xyXG5cdFx0XHRcdFx0c3RhdHVzTWVzc2FnZS5pbm5lckhUTUwgPSBtZXNzYWdlLmZhaWx1cmU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlucHV0W2ldLnZhbHVlID0gJyc7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIFNsaWRlclxyXG5cdGxldCBzbGlkZUluZGV4ID0gMTtcclxuXHRsZXQgc2xpZGVJbmRleFRpdGxlID0gMTtcclxuXHRsZXQgc2xpZGVJbmRleERlc2NyID0gMTtcclxuXHRsZXQgc2xpZGVzSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWl0ZW0nKTtcclxuXHRsZXQgc2xpZGVzVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbi10aXRsZV9fYnVyZ2VycycpO1xyXG5cdGxldCBzbGlkZXNEZXNjciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXJnZXItZGVzY3InKTtcclxuXHRsZXQgYXJyb3dQcmV2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LXByZXYnKTtcclxuXHRsZXQgYXJyb3dOZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFycm93LW5leHQnKTtcclxuXHRsZXQgcHJpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnVyZ2VyLXByaWNlJyk7XHJcblxyXG5cdHNob3dTbGlkZXNJbWFnZShzbGlkZUluZGV4KTtcclxuXHQvLyBzaG93U2xpZGVzVGl0bGUoc2xpZGVJbmRleFRpdGxlKTtcclxuXHQvLyBzaG93U2xpZGVzRGVzY3Ioc2xpZGVJbmRleERlc2NyKTtcclxuXHRcclxuXHRmdW5jdGlvbiBzaG93U2xpZGVzSW1hZ2Uobikge1xyXG5cdFx0aWYgKG4gPiBzbGlkZXNJbWFnZS5sZW5ndGgpIHtcclxuXHRcdFx0c2xpZGVJbmRleCA9IDE7XHJcblx0XHR9IGlmIChuIDwgMSkge1xyXG5cdFx0XHRzbGlkZUluZGV4ID0gc2xpZGVzSW1hZ2UubGVuZ3RoO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNsaWRlc0ltYWdlLmZvckVhY2goKGl0ZW0pID0+IHsgLy8g0J/QtdGA0LXQsdC+0YAg0LLRgdC10YUg0YHQu9Cw0LnQtNC+0LJcclxuXHRcdFx0aXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyDQodC60YDRi9GC0Ywg0LLRgdC1INGB0LvQsNC50LTRi1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2xpZGVzVGl0bGUuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0XHRpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcmljZS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRcdGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG5cdFx0fSlcclxuXHJcblx0XHRzbGlkZXNEZXNjci5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRcdGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNsaWRlc0ltYWdlW3NsaWRlSW5kZXggLSAxXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgLy8g0J/QvtC60LDQt9Cw0YLRjCDQv9C10YDQstGL0Lkg0YHQu9Cw0LnQtFxyXG5cdFx0c2xpZGVzVGl0bGVbc2xpZGVJbmRleCAtIDFdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cdFx0c2xpZGVzRGVzY3Jbc2xpZGVJbmRleCAtIDFdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyBcclxuXHRcdHByaWNlW3NsaWRlSW5kZXggLSAxXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIG5leHRTbGlkZXMobikgeyAvLyDQodC80LXQvdCwINGB0LvQsNC50LTQvtCyXHJcblx0XHRzaG93U2xpZGVzSW1hZ2Uoc2xpZGVJbmRleCArPSBuKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGN1cnJlbnRTbGlkZShuKSB7XHJcblx0XHRzaG93U2xpZGVzSW1hZ2Uoc2xpZGVJbmRleCA9IG4pO1xyXG5cdH1cclxuXHJcblx0YXJyb3dQcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRuZXh0U2xpZGVzKC0xKTtcclxuXHR9KTtcclxuXHJcblx0YXJyb3dOZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRuZXh0U2xpZGVzKDEpO1xyXG5cdH0pXHJcbn0pOyJdfQ==
